<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read/Write Optimization Patterns</title>
    <style>
        body {
            font-family: Liberation Sans, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .diagram-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 24px;
            max-width: 100%;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        <svg viewBox="0 0 1000 650" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="1000" height="650" fill="white"/>

            <!-- Title -->
            <text x="500" y="30" text-anchor="middle" style="font-size: 18px; font-weight: 600; fill: #1e293b;" font-family="Liberation Sans, Arial, sans-serif">Read/Write Optimization Patterns</text>
            <text x="500" y="50" text-anchor="middle" style="font-size: 11px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Optimize for your dominant access pattern</text>

            <!-- Spectrum bar -->
            <defs>
                <linearGradient id="spectrumGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#3b82f6"/>
                    <stop offset="50%" style="stop-color:#8b5cf6"/>
                    <stop offset="100%" style="stop-color:#ef4444"/>
                </linearGradient>
            </defs>
            <rect x="100" y="70" width="800" height="20" rx="10" fill="url(#spectrumGrad)"/>
            <text x="100" y="105" text-anchor="start" style="font-size: 11px; fill: #3b82f6; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Read-Heavy (90%+ reads)</text>
            <text x="500" y="105" text-anchor="middle" style="font-size: 11px; fill: #8b5cf6; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Balanced</text>
            <text x="900" y="105" text-anchor="end" style="font-size: 11px; fill: #ef4444; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Write-Heavy (50%+ writes)</text>

            <!-- READ-HEAVY SECTION -->
            <rect x="40" y="130" width="450" height="480" fill="#dbeafe" rx="8" stroke="#3b82f6" stroke-width="2"/>
            <rect x="40" y="130" width="450" height="35" fill="#3b82f6" rx="8"/>
            <rect x="40" y="155" width="450" height="10" fill="#3b82f6"/>
            <text x="265" y="154" text-anchor="middle" style="font-size: 14px; fill: white; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Read-Heavy Patterns</text>

            <!-- Pattern 1: Caching Layers -->
            <rect x="55" y="180" width="420" height="90" fill="white" rx="6" stroke="#93c5fd" stroke-width="1"/>
            <text x="70" y="200" style="font-size: 12px; fill: #1e3a8a; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Multi-Layer Caching</text>
            <text x="70" y="218" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• L1: In-process cache (HashMap, Caffeine) — microseconds</text>
            <text x="70" y="233" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• L2: Distributed cache (Redis, Memcached) — sub-millisecond</text>
            <text x="70" y="248" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• L3: CDN edge cache — varies by geography</text>
            <text x="70" y="263" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Cache invalidation complexity, memory costs</text>

            <!-- Pattern 2: Read Replicas -->
            <rect x="55" y="280" width="420" height="90" fill="white" rx="6" stroke="#93c5fd" stroke-width="1"/>
            <text x="70" y="300" style="font-size: 12px; fill: #1e3a8a; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Read Replicas</text>
            <text x="70" y="318" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Route read queries to replica instances</text>
            <text x="70" y="333" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Scale read capacity horizontally</text>
            <text x="70" y="348" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Geographic distribution for latency reduction</text>
            <text x="70" y="363" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Replication lag, read-after-write consistency</text>

            <!-- Pattern 3: Materialized Views -->
            <rect x="55" y="380" width="420" height="90" fill="white" rx="6" stroke="#93c5fd" stroke-width="1"/>
            <text x="70" y="400" style="font-size: 12px; fill: #1e3a8a; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Materialized Views / Precomputation</text>
            <text x="70" y="418" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Pre-join and pre-aggregate expensive queries</text>
            <text x="70" y="433" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Store query results as first-class data</text>
            <text x="70" y="448" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Refresh on schedule or on source change</text>
            <text x="70" y="463" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Storage costs, staleness, refresh overhead</text>

            <!-- Pattern 4: Denormalization -->
            <rect x="55" y="480" width="420" height="90" fill="white" rx="6" stroke="#93c5fd" stroke-width="1"/>
            <text x="70" y="500" style="font-size: 12px; fill: #1e3a8a; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Strategic Denormalization</text>
            <text x="70" y="518" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Embed related data to eliminate JOINs</text>
            <text x="70" y="533" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Duplicate data across access patterns</text>
            <text x="70" y="548" style="font-size: 10px; fill: #1e3a8a;" font-family="Liberation Sans, Arial, sans-serif">• Optimize for read path, accept write complexity</text>
            <text x="70" y="563" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Data duplication, update anomalies</text>

            <!-- WRITE-HEAVY SECTION -->
            <rect x="510" y="130" width="450" height="480" fill="#fee2e2" rx="8" stroke="#ef4444" stroke-width="2"/>
            <rect x="510" y="130" width="450" height="35" fill="#ef4444" rx="8"/>
            <rect x="510" y="155" width="450" height="10" fill="#ef4444"/>
            <text x="735" y="154" text-anchor="middle" style="font-size: 14px; fill: white; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Write-Heavy Patterns</text>

            <!-- Pattern 1: Sharding -->
            <rect x="525" y="180" width="420" height="90" fill="white" rx="6" stroke="#fca5a5" stroke-width="1"/>
            <text x="540" y="200" style="font-size: 12px; fill: #991b1b; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Horizontal Partitioning (Sharding)</text>
            <text x="540" y="218" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Distribute writes across multiple nodes</text>
            <text x="540" y="233" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Partition by tenant, geography, or hash</text>
            <text x="540" y="248" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Each shard handles fraction of total load</text>
            <text x="540" y="263" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Cross-shard queries, rebalancing complexity</text>

            <!-- Pattern 2: Batching -->
            <rect x="525" y="280" width="420" height="90" fill="white" rx="6" stroke="#fca5a5" stroke-width="1"/>
            <text x="540" y="300" style="font-size: 12px; fill: #991b1b; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Write Batching / Buffering</text>
            <text x="540" y="318" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Collect writes in memory, flush periodically</text>
            <text x="540" y="333" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Bulk inserts instead of individual writes</text>
            <text x="540" y="348" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Reduce round-trips and transaction overhead</text>
            <text x="540" y="363" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Data loss risk on crash, increased latency</text>

            <!-- Pattern 3: Append-Only -->
            <rect x="525" y="380" width="420" height="90" fill="white" rx="6" stroke="#fca5a5" stroke-width="1"/>
            <text x="540" y="400" style="font-size: 12px; fill: #991b1b; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Append-Only / Log-Structured Storage</text>
            <text x="540" y="418" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Sequential writes only (no random I/O)</text>
            <text x="540" y="433" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• LSM trees: write to memory, compact to disk</text>
            <text x="540" y="448" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Immutable records with soft deletes</text>
            <text x="540" y="463" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Read amplification, compaction overhead</text>

            <!-- Pattern 4: Async Writes -->
            <rect x="525" y="480" width="420" height="90" fill="white" rx="6" stroke="#fca5a5" stroke-width="1"/>
            <text x="540" y="500" style="font-size: 12px; fill: #991b1b; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Asynchronous / Queue-Based Writes</text>
            <text x="540" y="518" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Accept write to queue, process asynchronously</text>
            <text x="540" y="533" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Decouple ingestion rate from storage rate</text>
            <text x="540" y="548" style="font-size: 10px; fill: #991b1b;" font-family="Liberation Sans, Arial, sans-serif">• Handle bursts without backpressure to clients</text>
            <text x="540" y="563" style="font-size: 10px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Trade-off: Eventual persistence, queue durability</text>

            <!-- Footer -->
            <text x="500" y="630" text-anchor="middle" style="font-size: 11px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Measure your actual read/write ratio before optimizing — assumptions often differ from reality</text>
        </svg>
    </div>
</body>
</html>
