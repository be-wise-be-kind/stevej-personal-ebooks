<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cache Hierarchy</title>
    <style>
        body {
            font-family: Liberation Sans, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .diagram-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 24px;
            max-width: 100%;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        <svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <!-- Arrow marker -->
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
                </marker>
                <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
                </marker>

                <!-- Drop shadow -->
                <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
                    <feDropShadow dx="0" dy="2" stdDeviation="2" flood-opacity="0.1"/>
                </filter>
            </defs>

            <!-- Title -->
            <text x="450" y="35" text-anchor="middle" font-size="22" font-weight="600" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Cache Hierarchy</text>
            <text x="450" y="58" text-anchor="middle" font-size="13" fill="#64748b" font-family="Liberation Sans, Arial, sans-serif">Request flows left to right, checking each layer until cache hit or origin</text>

            <!-- Main flow line (background) -->
            <line x1="80" y1="180" x2="820" y2="180" stroke="#e2e8f0" stroke-width="3"/>

            <!-- User icon -->
            <g transform="translate(40, 140)">
                <circle cx="20" cy="15" r="12" fill="#64748b"/>
                <path d="M5,45 Q5,30 20,30 Q35,30 35,45" fill="#64748b"/>
                <text x="20" y="70" text-anchor="middle" font-size="11" fill="#64748b" font-family="Liberation Sans, Arial, sans-serif">User</text>
            </g>

            <!-- L4: Browser Cache -->
            <g transform="translate(100, 120)">
                <rect x="0" y="0" width="120" height="120" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
                <text x="60" y="30" text-anchor="middle" font-size="11" font-weight="600" fill="#1e40af" font-family="Liberation Sans, Arial, sans-serif">L4</text>
                <text x="60" y="50" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Browser</text>
                <text x="60" y="68" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Cache</text>
                <rect x="15" y="80" width="90" height="28" rx="4" fill="#bfdbfe"/>
                <text x="60" y="99" text-anchor="middle" font-size="11" font-weight="600" fill="#1e40af" font-family="Liberation Sans, Arial, sans-serif">0ms</text>
            </g>

            <!-- Arrow L4 to L3 -->
            <line x1="225" y1="180" x2="255" y2="180" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- L3: CDN -->
            <g transform="translate(260, 120)">
                <rect x="0" y="0" width="120" height="120" rx="8" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" filter="url(#shadow)"/>
                <text x="60" y="30" text-anchor="middle" font-size="11" font-weight="600" fill="#4338ca" font-family="Liberation Sans, Arial, sans-serif">L3</text>
                <text x="60" y="50" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">CDN</text>
                <text x="60" y="68" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Edge</text>
                <rect x="15" y="80" width="90" height="28" rx="4" fill="#c7d2fe"/>
                <text x="60" y="99" text-anchor="middle" font-size="11" font-weight="600" fill="#4338ca" font-family="Liberation Sans, Arial, sans-serif">10-50ms</text>
            </g>

            <!-- Arrow L3 to L2 -->
            <line x1="385" y1="180" x2="415" y2="180" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- Internet cloud indicator -->
            <text x="400" y="155" text-anchor="middle" font-size="10" fill="#94a3b8" font-family="Liberation Sans, Arial, sans-serif">internet</text>

            <!-- L2: Distributed Cache (Redis) -->
            <g transform="translate(420, 120)">
                <rect x="0" y="0" width="120" height="120" rx="8" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>
                <text x="60" y="30" text-anchor="middle" font-size="11" font-weight="600" fill="#6d28d9" font-family="Liberation Sans, Arial, sans-serif">L2</text>
                <text x="60" y="50" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Distributed</text>
                <text x="60" y="68" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Cache (Redis)</text>
                <rect x="15" y="80" width="90" height="28" rx="4" fill="#ddd6fe"/>
                <text x="60" y="99" text-anchor="middle" font-size="11" font-weight="600" fill="#6d28d9" font-family="Liberation Sans, Arial, sans-serif">1-5ms</text>
            </g>

            <!-- Arrow L2 to L1 -->
            <line x1="545" y1="180" x2="575" y2="180" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- L1: In-Process Cache -->
            <g transform="translate(580, 120)">
                <rect x="0" y="0" width="120" height="120" rx="8" fill="#f3e8ff" stroke="#a855f7" stroke-width="2" filter="url(#shadow)"/>
                <text x="60" y="30" text-anchor="middle" font-size="11" font-weight="600" fill="#7e22ce" font-family="Liberation Sans, Arial, sans-serif">L1</text>
                <text x="60" y="50" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">In-Process</text>
                <text x="60" y="68" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Cache</text>
                <rect x="15" y="80" width="90" height="28" rx="4" fill="#e9d5ff"/>
                <text x="60" y="99" text-anchor="middle" font-size="11" font-weight="600" fill="#7e22ce" font-family="Liberation Sans, Arial, sans-serif">Âµs</text>
            </g>

            <!-- Arrow L1 to L0 -->
            <line x1="705" y1="180" x2="735" y2="180" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- L0: Database -->
            <g transform="translate(740, 120)">
                <rect x="0" y="0" width="120" height="120" rx="8" fill="#f1f5f9" stroke="#64748b" stroke-width="2" filter="url(#shadow)"/>
                <text x="60" y="30" text-anchor="middle" font-size="11" font-weight="600" fill="#475569" font-family="Liberation Sans, Arial, sans-serif">L0</text>
                <text x="60" y="50" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">Database</text>
                <text x="60" y="68" text-anchor="middle" font-size="12" font-weight="500" fill="#1e293b" font-family="Liberation Sans, Arial, sans-serif">(Origin)</text>
                <rect x="15" y="80" width="90" height="28" rx="4" fill="#e2e8f0"/>
                <text x="60" y="99" text-anchor="middle" font-size="11" font-weight="600" fill="#475569" font-family="Liberation Sans, Arial, sans-serif">10-100ms</text>
            </g>

            <!-- Cache hit return arrows (curved, going back) -->
            <!-- L4 hit -->
            <path d="M 160 245 Q 160 280 100 280 Q 60 280 60 250" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowGreen)" stroke-dasharray="4,2"/>
            <text x="110" y="295" text-anchor="middle" font-size="10" fill="#22c55e" font-family="Liberation Sans, Arial, sans-serif">L4 hit: instant</text>

            <!-- L3 hit -->
            <path d="M 320 245 Q 320 310 180 310 Q 60 310 60 260" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowGreen)" stroke-dasharray="4,2"/>
            <text x="190" y="325" text-anchor="middle" font-size="10" fill="#22c55e" font-family="Liberation Sans, Arial, sans-serif">L3 hit: ~30ms</text>

            <!-- L2 hit -->
            <path d="M 480 245 Q 480 340 260 340 Q 60 340 60 270" stroke="#22c55e" stroke-width="2" fill="none" marker-end="url(#arrowGreen)" stroke-dasharray="4,2"/>
            <text x="270" y="355" text-anchor="middle" font-size="10" fill="#22c55e" font-family="Liberation Sans, Arial, sans-serif">L2 hit: ~35ms</text>

            <!-- Legend -->
            <g transform="translate(500, 375)">
                <line x1="0" y1="8" x2="30" y2="8" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="40" y="12" font-size="11" fill="#64748b" font-family="Liberation Sans, Arial, sans-serif">Request path (cache miss)</text>

                <line x1="220" y1="8" x2="250" y2="8" stroke="#22c55e" stroke-width="2" stroke-dasharray="4,2"/>
                <text x="260" y="12" font-size="11" fill="#64748b" font-family="Liberation Sans, Arial, sans-serif">Response (cache hit)</text>
            </g>
        </svg>
    </div>
</body>
</html>
