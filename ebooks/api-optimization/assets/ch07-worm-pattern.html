<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WORM Storage Pattern</title>
    <style>
        body {
            font-family: Liberation Sans, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .diagram-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 24px;
            max-width: 100%;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        <svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="800" height="400" fill="white"/>

            <!-- Title -->
            <text x="400" y="30" text-anchor="middle" style="font-size: 18px; font-weight: 600; fill: #1e293b;" font-family="Liberation Sans, Arial, sans-serif">Write Once Read Many (WORM) Pattern</text>

            <!-- Append-only log visualization -->
            <text x="50" y="70" style="font-size: 12px; fill: #374151; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Append-Only Log Structure</text>

            <!-- Cold storage (drawn first so line appears behind cards) -->
            <rect x="600" y="110" width="120" height="60" fill="#f3e8ff" rx="6" stroke="#a855f7" stroke-width="1"/>
            <text x="660" y="135" text-anchor="middle" style="font-size: 10px; fill: #7c3aed; font-weight: 500;" font-family="Liberation Sans, Arial, sans-serif">Cold Storage</text>
            <text x="660" y="150" text-anchor="middle" style="font-size: 9px; fill: #a855f7;" font-family="Liberation Sans, Arial, sans-serif">S3, GCS</text>
            <text x="660" y="163" text-anchor="middle" style="font-size: 8px; fill: #a855f7;" font-family="Liberation Sans, Arial, sans-serif">(Object Lock)</text>

            <path d="M 200 195 Q 400 230, 595 145" stroke="#a855f7" stroke-width="1.5" fill="none" stroke-dasharray="4,2" marker-end="url(#arrowPurple)"/>
            <text x="400" y="225" text-anchor="middle" style="font-size: 9px; fill: #a855f7;" font-family="Liberation Sans, Arial, sans-serif">Sealed segments replicate to cold storage</text>

            <!-- Sealed Segment 1 -->
            <rect x="50" y="90" width="150" height="100" fill="#e0f2fe" rx="6" stroke="#0284c7" stroke-width="2"/>
            <rect x="55" y="95" width="140" height="20" fill="#0284c7" rx="3"/>
            <text x="125" y="109" text-anchor="middle" style="font-size: 10px; fill: white; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Segment 1 (Sealed)</text>

            <!-- Log entries -->
            <rect x="60" y="120" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="125" y="131" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_001 | 2024-01-01T00:00:00Z</text>
            <rect x="60" y="138" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="125" y="149" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_002 | 2024-01-01T00:00:01Z</text>
            <rect x="60" y="156" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="125" y="167" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_003 | 2024-01-01T00:00:02Z</text>
            <rect x="60" y="174" width="130" height="12" fill="#7dd3fc" rx="2"/>
            <text x="125" y="183" text-anchor="middle" style="font-size: 7px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">... more events ...</text>

            <!-- Lock icon for sealed -->
            <circle cx="185" cy="105" r="8" fill="#0284c7"/>
            <text x="185" y="109" text-anchor="middle" style="font-size: 10px; fill: white;" font-family="Liberation Sans, Arial, sans-serif">üîí</text>

            <!-- Sealed Segment 2 -->
            <rect x="220" y="90" width="150" height="100" fill="#e0f2fe" rx="6" stroke="#0284c7" stroke-width="2"/>
            <rect x="225" y="95" width="140" height="20" fill="#0284c7" rx="3"/>
            <text x="295" y="109" text-anchor="middle" style="font-size: 10px; fill: white; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Segment 2 (Sealed)</text>

            <rect x="230" y="120" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="295" y="131" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_101 | 2024-01-02T00:00:00Z</text>
            <rect x="230" y="138" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="295" y="149" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_102 | 2024-01-02T00:00:01Z</text>
            <rect x="230" y="156" width="130" height="15" fill="#bae6fd" rx="2"/>
            <text x="295" y="167" text-anchor="middle" style="font-size: 8px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">event_103 | 2024-01-02T00:00:02Z</text>
            <rect x="230" y="174" width="130" height="12" fill="#7dd3fc" rx="2"/>
            <text x="295" y="183" text-anchor="middle" style="font-size: 7px; fill: #0369a1;" font-family="Liberation Sans, Arial, sans-serif">... more events ...</text>

            <!-- Lock icon for sealed -->
            <circle cx="355" cy="105" r="8" fill="#0284c7"/>
            <text x="355" y="109" text-anchor="middle" style="font-size: 10px; fill: white;" font-family="Liberation Sans, Arial, sans-serif">üîí</text>

            <!-- Active Segment -->
            <rect x="390" y="90" width="150" height="100" fill="#dcfce7" rx="6" stroke="#22c55e" stroke-width="2"/>
            <rect x="395" y="95" width="140" height="20" fill="#22c55e" rx="3"/>
            <text x="465" y="109" text-anchor="middle" style="font-size: 10px; fill: white; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Active Segment</text>

            <rect x="400" y="120" width="130" height="15" fill="#bbf7d0" rx="2"/>
            <text x="465" y="131" text-anchor="middle" style="font-size: 8px; fill: #166534;" font-family="Liberation Sans, Arial, sans-serif">event_201 | 2024-01-03T00:00:00Z</text>
            <rect x="400" y="138" width="130" height="15" fill="#bbf7d0" rx="2"/>
            <text x="465" y="149" text-anchor="middle" style="font-size: 8px; fill: #166534;" font-family="Liberation Sans, Arial, sans-serif">event_202 | 2024-01-03T00:00:01Z</text>
            <rect x="400" y="156" width="130" height="15" fill="#f0fdf4" rx="2" stroke="#86efac" stroke-width="1" stroke-dasharray="3,2"/>
            <text x="465" y="167" text-anchor="middle" style="font-size: 8px; fill: #86efac;" font-family="Liberation Sans, Arial, sans-serif">‚Üê next write position</text>

            <!-- Pencil icon for active -->
            <circle cx="525" cy="105" r="8" fill="#22c55e"/>
            <text x="525" y="109" text-anchor="middle" style="font-size: 10px; fill: white;" font-family="Liberation Sans, Arial, sans-serif">‚úèÔ∏è</text>

            <!-- Write arrow -->
            <line x1="465" y1="55" x2="465" y2="85" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>
            <text x="465" y="50" text-anchor="middle" style="font-size: 10px; fill: #22c55e; font-weight: 500;" font-family="Liberation Sans, Arial, sans-serif">Writes append here only</text>

            <!-- Read path -->
            <text x="50" y="245" style="font-size: 12px; fill: #374151; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">Read Path</text>

            <rect x="50" y="260" width="80" height="35" fill="#3b82f6" rx="6"/>
            <text x="90" y="282" text-anchor="middle" style="font-size: 10px; fill: white; font-weight: 500;" font-family="Liberation Sans, Arial, sans-serif">Query</text>

            <line x1="135" y1="277" x2="175" y2="277" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrowBlue)"/>

            <!-- Fan out to all segments -->
            <line x1="180" y1="277" x2="180" y2="277" stroke="#3b82f6" stroke-width="2"/>
            <line x1="180" y1="277" x2="260" y2="250" stroke="#3b82f6" stroke-width="1.5"/>
            <line x1="180" y1="277" x2="340" y2="250" stroke="#3b82f6" stroke-width="1.5"/>
            <line x1="180" y1="277" x2="420" y2="250" stroke="#3b82f6" stroke-width="1.5"/>

            <!-- Small segment boxes -->
            <rect x="230" y="235" width="60" height="25" fill="#e0f2fe" rx="3" stroke="#0284c7" stroke-width="1"/>
            <text x="260" y="252" text-anchor="middle" style="font-size: 8px; fill: #0284c7;" font-family="Liberation Sans, Arial, sans-serif">Seg 1</text>

            <rect x="310" y="235" width="60" height="25" fill="#e0f2fe" rx="3" stroke="#0284c7" stroke-width="1"/>
            <text x="340" y="252" text-anchor="middle" style="font-size: 8px; fill: #0284c7;" font-family="Liberation Sans, Arial, sans-serif">Seg 2</text>

            <rect x="390" y="235" width="60" height="25" fill="#dcfce7" rx="3" stroke="#22c55e" stroke-width="1"/>
            <text x="420" y="252" text-anchor="middle" style="font-size: 8px; fill: #22c55e;" font-family="Liberation Sans, Arial, sans-serif">Active</text>

            <text x="340" y="285" text-anchor="middle" style="font-size: 9px; fill: #64748b;" font-family="Liberation Sans, Arial, sans-serif">Reads can access all segments (sealed and active)</text>

            <!-- Benefits section -->
            <rect x="50" y="310" width="700" height="80" fill="#f8fafc" rx="6"/>
            <text x="70" y="335" style="font-size: 11px; fill: #374151; font-weight: 600;" font-family="Liberation Sans, Arial, sans-serif">WORM Benefits:</text>

            <circle cx="80" cy="355" r="4" fill="#22c55e"/>
            <text x="90" y="359" style="font-size: 10px; fill: #374151;" font-family="Liberation Sans, Arial, sans-serif">Immutable audit trail - data cannot be altered after write</text>

            <circle cx="80" cy="375" r="4" fill="#22c55e"/>
            <text x="90" y="379" style="font-size: 10px; fill: #374151;" font-family="Liberation Sans, Arial, sans-serif">Regulatory compliance (financial, healthcare, legal)</text>

            <circle cx="430" cy="355" r="4" fill="#22c55e"/>
            <text x="440" y="359" style="font-size: 10px; fill: #374151;" font-family="Liberation Sans, Arial, sans-serif">Event sourcing - full history reconstruction</text>

            <circle cx="430" cy="375" r="4" fill="#22c55e"/>
            <text x="440" y="379" style="font-size: 10px; fill: #374151;" font-family="Liberation Sans, Arial, sans-serif">Simplified replication (sealed segments are static)</text>

            <!-- Arrow markers -->
            <defs>
                <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#22c55e"/>
                </marker>
                <marker id="arrowBlue" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#3b82f6"/>
                </marker>
                <marker id="arrowPurple" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path d="M0,0 L0,6 L9,3 z" fill="#a855f7"/>
                </marker>
            </defs>
        </svg>
    </div>
</body>
</html>
