<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B-Tree Index Structure</title>
    <style>
        body {
            font-family: Liberation Sans, Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .diagram-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 24px;
            max-width: 100%;
        }
        svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="diagram-container">
        
        <svg viewBox="0 0 950 600" xmlns="http://www.w3.org/2000/svg">
            <!-- Title -->
            <text x="475.0" y="30" text-anchor="middle" font-family="Liberation Sans, Arial, sans-serif" font-size="20" font-weight="600" fill="#1e293b">B-Tree Index Structure</text>

            <defs>
                <!-- Gradients -->
                <linearGradient id="rootGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="internalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="leafGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="tableGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="pathGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#f97316;stop-opacity:1" />
                </linearGradient>
                <!-- Arrow marker -->
                <marker id="arrowGray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                </marker>
                <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#f97316"/>
                </marker>
                <!-- Drop shadow -->
                <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                    <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
                </filter>
                <!-- Glow for search path -->
                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge>
                        <feMergeNode in="coloredBlur"/>
                        <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                </filter>
            </defs>

            <!-- Level Labels -->
            <text x="30" y="60" fill="#64748b" font-size="12" font-weight="600">Root Level</text>
            <text x="30" y="170" fill="#64748b" font-size="12" font-weight="600">Internal Level</text>
            <text x="30" y="310" fill="#64748b" font-size="12" font-weight="600">Leaf Level</text>
            <text x="30" y="470" fill="#64748b" font-size="12" font-weight="600">Table Rows</text>

            <!-- ROOT NODE -->
            <g filter="url(#shadow)">
                <rect x="375" y="35" width="200" height="45" rx="6" fill="url(#rootGradient)"/>
                <line x1="425" y1="35" x2="425" y2="80" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="475" y1="35" x2="475" y2="80" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="525" y1="35" x2="525" y2="80" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="400" y="63" text-anchor="middle" fill="white" font-size="12" font-weight="600">30</text>
                <text x="450" y="63" text-anchor="middle" fill="white" font-size="12" font-weight="600">60</text>
                <text x="500" y="63" text-anchor="middle" fill="white" font-size="12" font-weight="600">90</text>
                <text x="550" y="63" text-anchor="middle" fill="white" font-size="11" fill-opacity="0.7">...</text>
            </g>

            <!-- Connection lines from root to internal -->
            <line x1="400" y1="80" x2="200" y2="145" stroke="#94a3b8" stroke-width="1.5"/>
            <line x1="450" y1="80" x2="475" y2="145" stroke="#f97316" stroke-width="2.5" filter="url(#glow)"/>
            <line x1="525" y1="80" x2="750" y2="145" stroke="#94a3b8" stroke-width="1.5"/>

            <!-- INTERNAL NODES -->
            <!-- Left internal node -->
            <g filter="url(#shadow)">
                <rect x="100" y="145" width="200" height="45" rx="6" fill="url(#internalGradient)"/>
                <line x1="150" y1="145" x2="150" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="200" y1="145" x2="200" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="250" y1="145" x2="250" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="125" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">10</text>
                <text x="175" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">20</text>
                <text x="225" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">25</text>
                <text x="275" y="173" text-anchor="middle" fill="white" font-size="10" fill-opacity="0.7">...</text>
            </g>

            <!-- Middle internal node (on search path) -->
            <g filter="url(#shadow)">
                <rect x="375" y="145" width="200" height="45" rx="6" fill="url(#internalGradient)" stroke="#f97316" stroke-width="2"/>
                <line x1="425" y1="145" x2="425" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="475" y1="145" x2="475" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="525" y1="145" x2="525" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="400" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">35</text>
                <text x="450" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="600">45</text>
                <text x="500" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">55</text>
                <text x="550" y="173" text-anchor="middle" fill="white" font-size="10" fill-opacity="0.7">...</text>
            </g>

            <!-- Right internal node -->
            <g filter="url(#shadow)">
                <rect x="650" y="145" width="200" height="45" rx="6" fill="url(#internalGradient)"/>
                <line x1="700" y1="145" x2="700" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="750" y1="145" x2="750" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <line x1="800" y1="145" x2="800" y2="190" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="675" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">65</text>
                <text x="725" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">75</text>
                <text x="775" y="173" text-anchor="middle" fill="white" font-size="11" font-weight="500">85</text>
                <text x="825" y="173" text-anchor="middle" fill="white" font-size="10" fill-opacity="0.7">...</text>
            </g>

            <!-- Connection lines from internal to leaf -->
            <!-- From left internal -->
            <line x1="125" y1="190" x2="80" y2="285" stroke="#94a3b8" stroke-width="1"/>
            <line x1="175" y1="190" x2="190" y2="285" stroke="#94a3b8" stroke-width="1"/>
            <line x1="250" y1="190" x2="300" y2="285" stroke="#94a3b8" stroke-width="1"/>

            <!-- From middle internal (search path highlighted) -->
            <line x1="400" y1="190" x2="410" y2="285" stroke="#94a3b8" stroke-width="1"/>
            <line x1="475" y1="190" x2="520" y2="285" stroke="#f97316" stroke-width="2.5" filter="url(#glow)"/>
            <line x1="525" y1="190" x2="630" y2="285" stroke="#94a3b8" stroke-width="1"/>

            <!-- From right internal -->
            <line x1="700" y1="190" x2="740" y2="285" stroke="#94a3b8" stroke-width="1"/>
            <line x1="775" y1="190" x2="850" y2="285" stroke="#94a3b8" stroke-width="1"/>

            <!-- LEAF NODES -->
            <!-- Leaf 1 -->
            <g filter="url(#shadow)">
                <rect x="30" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="80" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">1, 5, 8</text>
                <text x="80" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 2 -->
            <g filter="url(#shadow)">
                <rect x="140" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="190" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">11, 15, 18</text>
                <text x="190" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 3 -->
            <g filter="url(#shadow)">
                <rect x="250" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="300" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">21, 23, 28</text>
                <text x="300" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 4 -->
            <g filter="url(#shadow)">
                <rect x="360" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="410" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">31, 38, 42</text>
                <text x="410" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 5 (search target) -->
            <g filter="url(#shadow)">
                <rect x="470" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)" stroke="#f97316" stroke-width="2"/>
                <text x="520" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="600">45, 48, 52</text>
                <text x="520" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 6 -->
            <g filter="url(#shadow)">
                <rect x="580" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="630" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">56, 58, 59</text>
                <text x="630" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 7 -->
            <g filter="url(#shadow)">
                <rect x="690" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="740" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">61, 68, 72</text>
                <text x="740" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Leaf 8 -->
            <g filter="url(#shadow)">
                <rect x="800" y="285" width="100" height="60" rx="6" fill="url(#leafGradient)"/>
                <text x="850" y="307" text-anchor="middle" fill="white" font-size="10" font-weight="500">76, 82, 88</text>
                <text x="850" y="325" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="9">+ row ptrs</text>
            </g>

            <!-- Linked list arrows between leaf nodes -->
            <line x1="130" y1="315" x2="138" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="240" y1="315" x2="248" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="350" y1="315" x2="358" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="460" y1="315" x2="468" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="570" y1="315" x2="578" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="680" y1="315" x2="688" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>
            <line x1="790" y1="315" x2="798" y2="315" stroke="#059669" stroke-width="1.5" marker-end="url(#arrowGray)"/>

            <!-- Pointer from leaf to table row -->
            <line x1="520" y1="345" x2="520" y2="430" stroke="#f97316" stroke-width="2.5" stroke-dasharray="5,3" marker-end="url(#arrowOrange)" filter="url(#glow)"/>

            <!-- Table representation -->
            <g filter="url(#shadow)">
                <rect x="300" y="440" width="440" height="110" rx="8" fill="url(#tableGradient)"/>
                <text x="520" y="465" text-anchor="middle" fill="white" font-size="13" font-weight="700">Table: posts</text>

                <!-- Table header -->
                <rect x="320" y="478" width="400" height="25" rx="4" fill="rgba(255,255,255,0.2)"/>
                <text x="370" y="495" text-anchor="middle" fill="white" font-size="11" font-weight="600">id</text>
                <text x="470" y="495" text-anchor="middle" fill="white" font-size="11" font-weight="600">title</text>
                <text x="600" y="495" text-anchor="middle" fill="white" font-size="11" font-weight="600">created_at</text>

                <!-- Table row (highlighted) -->
                <rect x="320" y="508" width="400" height="25" rx="4" fill="rgba(255,255,255,0.35)" stroke="white" stroke-width="1"/>
                <text x="370" y="525" text-anchor="middle" fill="white" font-size="11" font-weight="600">45</text>
                <text x="470" y="525" text-anchor="middle" fill="white" font-size="11">"My Post"</text>
                <text x="600" y="525" text-anchor="middle" fill="white" font-size="11">2024-01-15</text>
            </g>

            <!-- Search path annotation -->
            <g>
                <rect x="700" y="45" width="210" height="85" rx="8" fill="#fff7ed" stroke="#fed7aa" stroke-width="2"/>
                <text x="805" y="68" text-anchor="middle" fill="#c2410c" font-size="12" font-weight="700">Search: WHERE id = 45</text>
                <text x="805" y="88" text-anchor="middle" fill="#9a3412" font-size="10">1. Root: 45 > 30, go middle</text>
                <text x="805" y="103" text-anchor="middle" fill="#9a3412" font-size="10">2. Internal: 45 = 45, go right</text>
                <text x="805" y="118" text-anchor="middle" fill="#9a3412" font-size="10">3. Leaf: Found 45, get row ptr</text>
            </g>

            <!-- O(log n) annotation -->
            <g filter="url(#shadow)">
                <rect x="700" y="380" width="200" height="45" rx="8" fill="#ecfdf5" stroke="#a7f3d0" stroke-width="2"/>
                <text x="800" y="400" text-anchor="middle" fill="#059669" font-size="12" font-weight="700">Time Complexity: O(log n)</text>
                <text x="800" y="417" text-anchor="middle" fill="#047857" font-size="10">3 steps for 1M rows!</text>
            </g>

            <!-- Legend -->
            <g>
                <rect x="30" y="510" width="200" height="80" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="1"/>
                <text x="130" y="530" text-anchor="middle" fill="#475569" font-size="11" font-weight="600">Legend</text>

                <rect x="45" y="540" width="20" height="12" rx="3" fill="url(#rootGradient)"/>
                <text x="75" y="550" fill="#475569" font-size="10">Root Node</text>

                <rect x="45" y="558" width="20" height="12" rx="3" fill="url(#internalGradient)"/>
                <text x="75" y="568" fill="#475569" font-size="10">Internal Node</text>

                <rect x="130" y="540" width="20" height="12" rx="3" fill="url(#leafGradient)"/>
                <text x="160" y="550" fill="#475569" font-size="10">Leaf Node</text>

                <line x1="130" y1="564" x2="150" y2="564" stroke="#f97316" stroke-width="2"/>
                <text x="160" y="568" fill="#475569" font-size="10">Search Path</text>
            </g>
        </svg>
    </div>
</body>
</html>
